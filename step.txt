{
  "logs": {
    "metrics_collected": {
      "kubernetes": {
        "cluster_name": "STG-EKS-ACRLI",
        "metrics_collection_interval": 60,
        "metrics_include": [
          "pod_cpu_utilization",
          "pod_network_rx_bytes"
        ],
        "label_include": ["namespace","pod_name"]
      }
    },
    "force_flush_interval": 5
  }
}

kubectl edit cm cwagentconfig -n amazon-cloudwatch

{
  "logs": {
    "metrics_collected": {
      "kubernetes": {
        "cluster_name": "STG-EKS-ACRLI",
        "metrics_collection_interval": 60,
        "metrics_include": [
          "pod_cpu_utilization",
          "pod_network_rx_bytes"
        ],
        "label_include": ["namespace","pod_name"]
      }
    },
    "force_flush_interval": 5
  }
}



restart agent
kubectl rollout restart ds cloudwatch-agent -n amazon-cloudwatch
kubectl get pods -n amazon-cloudwatch -w



aws cloudwatch put-metric-data --namespace "acrli-daya-test" --metric-name "cwem-cpu-acr-li-b" --value 80 --unit Percent
aws cloudwatch put-metric-data --namespace "acrli-daya-test" --metric-name "cwem-nwin-acr-li-b" --value 20000000 --unit Bytes



